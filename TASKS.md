# Project Tasks

## Task Management Legend
- **Status**: `[ ]` Pending | `[~]` In Progress | `[x]` Completed
- **Priority**: `P0` Critical | `P1` High | `P2` Medium | `P3` Low
- **Complexity**: `L1` Simple | `L2` Moderate | `L3` Complex

---

## [x] TASK 1: Environment Variables Configuration
**Priority**: P0 | **Complexity**: L1 | **Estimated Files**: 3

### Description
Move hardcoded environment variables from `ai/client.py` to a `.env` file for better security and configuration management.

### Current State
- API key and base URL are hardcoded in `ai/client.py` (lines 5-6)
- No environment variable loading mechanism exists

### Requirements
1. Create `.env` file with the following variables:
   ```
   OPENAI_API_KEY=your_api_key_here
   OPENAI_API_BASE=https://open.bigmodel.cn/api/coding/paas/v4
   ```
2. Update `ai/client.py`:
   - Remove hardcoded `openai.api_key` and `openai.api_base`
   - Add `python-dotenv` dependency loading
   - Read variables from `.env` file
3. Update `requirements.txt`:
   - Add `python-dotenv` package
4. Update `.gitignore`:
   - Ensure `.env` is excluded from version control

### Acceptance Criteria
- [x] `.env` file created with proper structure
- [x] `ai/client.py` loads config from environment variables
- [x] Application runs without hardcoded credentials
- [x] `.env` is in `.gitignore`

### Dependencies
None

---

## [x] TASK 2: Replace Documentation Tab with Template Editor
**Priority**: P1 | **Complexity**: L3 | **Estimated Files**: 1

### Description
Replace the existing "Documentation" tab with a new "Template Editor" tab that allows users to review and edit the `template_md` (generated by `generate_template()`) before proceeding to `generate_docs()`.

### Current State
- "Documentation" tab exists in `gui/app.py` (line 236)
- Documentation generation is a one-step process in `run_doc_gen()` method
- Users cannot preview or modify the template before final documentation generation
- Workflow: `generate_template()` → immediately → `generate_docs()`

### Requirements
1. **Replace existing tab** (`gui/app.py`):
   - Rename `self.tab_docs` to `self.tab_template_editor`
   - Update tab name from "Documentation" to "Template Editor"
   - Remove the old `_build_tab_docs()` method
   - Create new `_build_tab_template_editor()` method

2. **Template Editor UI Components**:
   - Left panel: Configuration (keep existing template file input and instructions)
   - "Generate Template" button (replaces old "Generate Documentation" button)
   - Right panel: Large editable text area for displaying/editing `template_md`
   - "Confirm & Generate Docs" button (appears after template is generated)
   - Status indicator showing template generation state

3. **Update Workflow** (`gui/app.py`):
   - Remove existing `run_doc_gen()` method
   - Create new method `generate_template_handler()`:
     - Reads template example and instructions
     - Calls `ai.generate_template()`
     - Displays result in the text area for editing
   - Create new method `confirm_and_generate_docs()`:
     - Reads edited template from text area
     - **Saves edited template to `Template.docx` (overwrites original)**
     - Calls `ai.generate_docs()` with edited template
     - Saves result to `Project_Docs.docx`

4. **State Management**:
   - Store `template_md` as instance variable (`self.template_md`)
   - Enable/disable "Confirm & Generate Docs" button based on template state

### User Flow
```
Current:  [Project Setup] → [Documentation] → (auto-generate both files)
New:      [Project Setup] → [Template Editor] → [Generate Template] → [Review/Edit] → [Confirm] → [Generate Docs]
```

### Acceptance Criteria
- [x] Old "Documentation" tab is replaced with "Template Editor" tab
- [x] "Generate Template" button creates template and displays in editable area
- [x] User can edit template content before final generation
- [x] "Confirm & Generate Docs" button appears after template generation
- [x] Final documentation uses the edited template content
- [x] **Edited template is saved back to `Template.docx` before generating final docs**
- [x] Status messages clearly indicate current step
- [x] `Template.docx` is saved after template generation
- [x] `Project_Docs.docx` is saved after final documentation generation

### Dependencies
None

---

## [ ] TASK 3: Upload DOCX Template to Editor
**Priority**: P2 | **Complexity**: L2 | **Estimated Files**: 1

### Description
Add functionality to the Template Editor tab (created in TASK 2) that allows users to directly upload a .docx file and load its content into the template editing area, bypassing the AI template generation step.

### Current State
- After TASK 2, users can generate templates using AI
- Users must use AI generation or manually type/paste template content
- No direct file upload option exists for pre-existing templates

### Requirements
1. **Add Upload Button** (`gui/app.py` → `_build_tab_template_editor()`):
   - Add "Upload Template (.docx)" button in the left panel
   - Position: below the "Choose File (Optional)" button
   - Use `filedialog.askopenfilename()` with filetypes=[("Word Documents", "*.docx")]

2. **Implement Upload Handler** (`gui/app.py`):
   - Create method `upload_template_to_editor()`:
     - Opens file dialog for .docx selection
     - Reads file content using existing `read_dox_pdf()` utility
     - Converts content to markdown format
     - Displays content in the template editing text area
     - Enables the "Confirm & Generate Docs" button

3. **UI State Updates**:
   - Update status message: "Template loaded from [filename]"
   - Clear any previous AI-generated template from the editor
   - Enable editing immediately after upload

### User Flow
```
Option A: [Project Setup] → [Template Editor] → [Upload .docx] → [Review/Edit] → [Confirm]
Option B: [Project Setup] → [Template Editor] → [Generate Template] → [Review/Edit] → [Confirm]
```

### Acceptance Criteria
- [ ] "Upload Template (.docx)" button added to left panel
- [ ] File dialog filters for .docx files only
- [ ] Uploaded content displays in editable text area
- [ ] "Confirm & Generate Docs" button is enabled after upload
- [ ] Status message confirms successful upload with filename
- [ ] Existing `read_dox_pdf()` utility is reused (no new dependencies)

### Dependencies
TASK 2 must be completed first (Template Editor tab must exist)

---

## Version History
| Date | Change | Author |
|------|--------|--------|
| 2025-01-30 | Initial task creation | Joy |


## [ ] TASK 4: Optimize file names & locations to store these files
  1. Extract the project name from the path of project(codebase)
  2. Generated Template file name: Template_project_name_timestamp.docx, timestamp is in the format of YYYYMMDDHHMMSS. Saved into ./template
  3. Generated project file_name: project_name_timestamp.docx, timestamp is in the format of YYYYMMDDHHMMSS. Saved into ./final_docx
  